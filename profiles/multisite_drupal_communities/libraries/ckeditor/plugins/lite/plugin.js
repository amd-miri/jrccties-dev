/* Source version: 1.1.30 */
(function(){var p={Events:{INIT:"lite:init",ACCEPT:"lite:accept",REJECT:"lite:reject",SHOW_HIDE:"lite:showHide",TRACKING:"lite:tracking",CHANGE:"lite:change"},Commands:{TOGGLE_TRACKING:"lite.ToggleTracking",TOGGLE_SHOW:"lite.ToggleShow",ACCEPT_ALL:"lite.AcceptAll",REJECT_ALL:"lite.RejectAll",ACCEPT_ONE:"lite.AcceptOne",REJECT_ONE:"lite.RejectOne",TOGGLE_TOOLTIPS:"lite.ToggleTooltips"}},k={show:true,path:"js/opentip-adapter.js",classPath:"OpentipAdapter",cssPath:"css/opentip.css",delay:500},n="%a by %u %t",e=/^[\s\r\n]*$/,r=[{regex:/[\s]*title=\"[^\"]+\"/g,replace:""},{regex:/[\s]*data-selected=\"[^\"]+\"/g,replace:""}],g=[],q=[CKEDITOR.CTRL+88,CKEDITOR.CTRL+120,CKEDITOR.SHIFT+46];function i(t){return q.indexOf(t)>=0}function h(u){for(var t=g.length;t--;){var v=g[t];if(v.editor==u){return t}}return -1}function c(t){var u=h(t);return u>=0?g[u]:null}function j(t){var u=c(t);return u&&u.plugin}function m(t,u){g.push({plugin:u,editor:t})}function o(v,w,t,y){if(null===v||(typeof(v)=="undefined")){v=""}else{v=String(v)}t=String(t);var x=t.length;for(var u=v.length;u<w;u+=x){if(y){v+=padWidth}else{v=t+v}}return v}function s(t,u){return o(t,u,"0")}function l(v,x){var w=v.document,t=w.getBody(),u=false,y=function(){u=true};t.on(x,y);(CKEDITOR.env.version>7?w.$:w.$.selection.createRange())["execCommand"](x);t.removeListener(x,y);return u}function a(w){var u=new Date();var A=u.getDate();var y=u.getMonth();var z=u.getFullYear();var C=typeof(w);if(C=="string"||C=="number"){w=new Date(w)}var v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(A==w.getDate()&&y==w.getMonth()&&z==w.getFullYear()){var x=Math.floor((u.getTime()-w.getTime())/60000);if(x<1){return"now"}else{if(x<2){return"1 minute ago"}else{if(x<60){return(x+" minutes ago")}else{var B=w.getHours();var x=w.getMinutes();return"on "+s(B,2)+":"+s(x,2,"0")}}}}else{if(z==w.getFullYear()){return"on "+v[w.getMonth()]+" "+w.getDate()}else{return"on "+v[w.getMonth()]+" "+w.getDate()+", "+w.getFullYear()}}}CKEDITOR.plugins.add("lite",{icons:"lite_AcceptAll,lite_AcceptOne,lite_RejectAll,lite_RejectOne,lite_ToggleShow,lite_ToggleTracking",props:{deleteTag:"span",insertTag:"span",deleteClass:"ice-del",insertClass:"ice-ins",attributes:{changeId:"data-cid",userId:"data-userid",userName:"data-username",sessionId:"data-session-id",changeData:"data-changedata",time:"data-time"},stylePrefix:"ice-cts",preserveOnPaste:"p",css:"css/lite.css"},_scriptsLoaded:null,init:function(A){var x=c(A);if(x){return}if(!this._inited){d();this._inited=true}var F=this.path,z=new LITEPlugin(this.props,F),t=CKEDITOR.tools.extend({},A.config.lite||{}),C=t.tooltips;if(undefined==C){C=true}if(C===true){C=k}t.tooltips=C;m(A,z);z.init(A,t);A.on("destroy",(function(G){var H=h(G);if(H>=0){g.splice(H,1)}}).bind(this));if(this._scriptsLoaded){z._onScriptsLoaded();return}else{if(this._scriptsLoaded===false){return}}this._scriptsLoaded=false;var u=(typeof(jQuery)=="function"),E=this,v=t.jQueryPath||"js/jquery.min.js",w=(t.includeType?t["includes_"+t.includeType]:t.includes)||["lite-includes.js"];w=w.slice();for(var y=0,B=w.length;y<B;++y){w[y]=F+w[y]}if(!u){w.splice(0,0,this.path+v)}if(C.path){w.push(this.path+C.path)}var D=function(){if(w.length<1){E._scriptsLoaded=true;if(!u){jQuery.noConflict()}jQuery.each(g,(function(H,I){I.plugin._onScriptsLoaded()}))}else{var G=w.shift();CKEDITOR.scriptLoader.load(G,function(){D()},E)}};D(w)},findPlugin:function(t){return j(t)},startNewSession:function(t){var u=j(t);if(u){u.startNewSession()}else{b("startNewSession: plugin not found")}}});LITEPlugin=function(u,v){this.props={};this.path=v;for(var t in u){if(u.hasOwnProperty(t)){this.props[t]=u[t]}}};LITEPlugin.prototype={init:function(A,w){this._editor=A;this._domLoaded=false;this._editor=null;this._tracker=null;this._isVisible=true;this._liteCommandNames=[];this._canAcceptReject=true;this._removeBindings=[];A.ui.addToolbarGroup("lite");this._setPluginFeatures(A,this.props);this._changeTimeout=null;this._notifyChange=this._notifyChange.bind(this);this._notifyTextChange=this._notifyTextChange.bind(this);this._config=w;var t=w.acceptRejectInReadOnly===true;var u=[{command:p.Commands.TOGGLE_TRACKING,exec:this._onToggleTracking,title:"Toggle Tracking Changes",trackingOnly:false},{command:p.Commands.TOGGLE_SHOW,exec:this._onToggleShow,title:"Toggle Tracking Changes",readOnly:true},{command:p.Commands.ACCEPT_ALL,exec:this._onAcceptAll,title:"Accept all changes",readOnly:t},{command:p.Commands.REJECT_ALL,exec:this._onRejectAll,title:"Reject all changes",readOnly:t},{command:p.Commands.ACCEPT_ONE,exec:this._onAcceptOne,title:"Accept Change",readOnly:t},{command:p.Commands.REJECT_ONE,exec:this._onRejectOne,title:"Reject Change",readOnly:t},{command:p.Commands.TOGGLE_TOOLTIPS,exec:this._onToggleTooltips,readOnly:true}];this._isTracking=w.isTracking!==false;this._eventsBounds=false;A.on("contentDom",(function(E){this._onDomLoaded(E)}).bind(this));A.on("dataReady",(function(E){this._onAfterSetData(E)}).bind(this));var D=this.path;var v=w.commands||[p.Commands.TOGGLE_TRACKING,p.Commands.TOGGLE_SHOW,p.Commands.ACCEPT_ALL,p.Commands.REJECT_ALL,p.Commands.ACCEPT_ONE,p.Commands.REJECT_ONE];var C=this;function z(F){A.addCommand(F.command,{exec:F.exec.bind(C),readOnly:F.readOnly||false});if(F.title&&v.indexOf(F.command)>=0){var E=C._commandNameToUIName(F.command);A.ui.addButton(E,{label:F.title,command:F.command,toolbar:"lite"});if(F.trackingOnly!==false){C._liteCommandNames.push(F.command)}}}for(var y=0,B=u.length;y<B;++y){z(u[y])}if(A.addMenuItems){A.addMenuGroup("lite",50);var x={};x[p.Commands.ACCEPT_ONE]={label:"Accept Change",command:p.Commands.ACCEPT_ONE,group:"lite",order:1,icon:D+"icons/accept_one.png"};x[p.Commands.REJECT_ONE]={label:"Reject Change",command:p.Commands.REJECT_ONE,group:"lite",order:2,icon:D+"icons/reject_one.png"};A.addMenuItems(x)}if(A.contextMenu){A.contextMenu.addListener((function(F,G){if(F&&this._tracker&&this._tracker.currentChangeNode(F)){var E={};E[p.Commands.ACCEPT_ONE]=CKEDITOR.TRISTATE_OFF;E[p.Commands.REJECT_ONE]=CKEDITOR.TRISTATE_OFF;return E}else{return null}}).bind(this))}},toggleTracking:function(t,u){if("boolean"===typeof u){u={notify:u}}u=u||{};var z=(undefined===t)?!this._isTracking:t,y=this._editor,x=u&&u.force;if(!z&&this._isTracking){var v=this._tracker.countChanges({verify:true});if(v){return window.alert("Your document containssome pending changes.\nPlease resolve them before turning off change tracking.")}}this._isTracking=z;this._setCommandsState(this._liteCommandNames,z?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);this._updateTrackingState();this.toggleShow(z,false);this._setCommandsState(p.Commands.TOGGLE_TRACKING,z?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);var w=y.ui.get(this._commandNameToUIName(p.Commands.TOGGLE_TRACKING));if(w){this._setButtonTitle(w,z?"Stop tracking changes":"Start tracking changes")}if(u.notify!==false){y.fire(p.Events.TRACKING,{tracking:z,lite:this})}},toggleShow:function(t,u){var w=(typeof(t)=="undefined")?(!this._isVisible):t;this._isVisible=w;if(this._isTracking){this._setCommandsState(p.Commands.TOGGLE_SHOW,w?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}this._tracker.setShowChanges(w&&this._isTracking);var v=this._editor.ui.get(this._commandNameToUIName(p.Commands.TOGGLE_SHOW));if(v){this._setButtonTitle(v,w?"Hide tracked changes":"Show tracked changes")}if(u!==false){this._editor.fire(p.Events.SHOW_HIDE,{show:w,lite:this})}},isVisible:function(){return this._isVisible},isTracking:function(){return this._isTracking},acceptAll:function(t){this._tracker.acceptAll(t);this._cleanup();this._editor.fire(p.Events.ACCEPT,{lite:this,options:t})},rejectAll:function(t){this._tracker.rejectAll(t);this._cleanup();this._editor.fire(p.Events.REJECT,{lite:this,options:t})},setUserInfo:function(t){t=t||{};this._config.userId=String(t.id);this._config.userName=t.name||"";if(this._tracker){this._tracker.setCurrentUser({id:this._config.userId,name:this._config.userName})}},countChanges:function(t){return((this._tracker&&this._tracker.countChanges(t))||0)},enableAcceptReject:function(t){this._canAcceptReject=!!t;this._onIceChange()},filterIceElement:function(t){if(!t){return true}try{if(t.hasClass(this.props.insertClass)||t.hasClass(this.props.deleteClass)){return false}}catch(t){}return true},startNewSession:function(){var t=new Date();this._sessionId=String.fromCharCode(65+Math.round(Math.random()*26))+t.getDate()+t.getDay()+t.getHours()+t.getMinutes()+t.getMilliseconds();if(this._tracker){this._tracker.setSessionId(this._sessionId)}},getCleanMarkup:function(u){if(null===u||undefined===u){u=(this._editor&&this._editor.getData())||""}for(var t=r.length-1;t>=0;--t){u=u.replace(r[t].regex,r[t].replace)}return u},getCleanText:function(){var t=this._getBody();if(!t){return""}var v=new Array();v.push("");var u=this._tracker.getDeleteClass();this._getCleanText(t,v,u);var w=v.join("\n");w=w.replace(/&nbsp(;)?/ig," ");return w},_getCleanText:function(y,x,w){var v=y.getAttribute("class");if(v&&v.indexOf(w)>=0){return}var t;if(t=((y.nodeName&&y.nodeName.toUpperCase()=="BR")||("block"==jQuery(y).css("display")))){if(e.test(x[x.length-1])){x[x.length-1]=""}else{x.push("")}}for(var z=y.firstChild;z;z=z.nextSibling){var u=z.nodeType;if(3==u){x[x.length-1]+=String(z.nodeValue)}else{if(1==u||9==u||11==u){this._getCleanText(z,x,w)}}}if(t){x.push("")}},_onDomLoaded:function(u){this._domLoaded=true;this._editor=u.editor;var t=this._editor.editable();t.attachListener(t,"keypress",this._onKeyPress,this,null,1);this._onReady()},_onScriptsLoaded:function(u,t){this._scriptsLoaded=true;this._onReady()},_loadCSS:function(v){var t=v.getElementsByTagName("head")[0];function u(x,y){var w=jQuery(t).find("#"+y);if(!w.length){w=v.createElement("link");w.setAttribute("rel","stylesheet");w.setAttribute("type","text/css");w.setAttribute("id",y);w.setAttribute("href",x);t.appendChild(w)}}u(this.path+"css/lite.css","__lite__css__");if(this._config.tooltips.cssPath){u(this.path+this._config.tooltips.cssPath,"__lite_tt_css__")}},_onReady:function(){if(!this._scriptsLoaded||!this._domLoaded){return}setTimeout(this._afterReady.bind(this),5)},_getBody:function(){try{return this._editor.editable().$}catch(t){return null}},_afterReady:function(){var A=this._editor,z=A.document.$,t=this._getBody(),w=this._config,u=(w&&w.debug)||{};this._loadCSS(z);if(!this._eventsBounds){this._eventsBounds=true;var y=this._onPaste.bind(this);A.on("afterCommandExec",this._onAfterCommand.bind(this));A.on("beforeCommandExec",this._onBeforeCommand.bind(this));if(this._config.handlePaste){A.on("paste",y,null,null,1)}A.on("beforeGetData",this._onBeforeGetData.bind(this));A.on("insertHtml",y,null,null,1);A.on("insertText",y,null,null,1);A.on("insertElement",y,null,null,1);A.on("mode",this._onModeChange.bind(this),null,null,1);A.on("readOnly",this._onReadOnly.bind(this))}if(this._tracker){if(t!=this._tracker.getContentElement()){this._tracker.stopTracking(true);jQuery(this._tracker).unbind();this._tracker=null}}if(this._tracker){return}var v={element:t,handleEvents:true,mergeBlocks:true,currentUser:{id:w.userId||"",name:w.userName||""},userStyles:w.userStyles,changeTypes:{insertType:{tag:this.props.insertTag,alias:this.props.insertClass,action:"Inserted"},deleteType:{tag:this.props.deleteTag,alias:this.props.deleteClass,action:"Deleted"}},hostMethods:{getHostRange:this._getHostRange.bind(this),getHostRangeData:this._getHostRangeData.bind(this),makeHostElement:function(B){return new CKEDITOR.dom.element(B)},getHostNode:function(B){return B&&B.$},setHostRange:this._setHostRange.bind(this),hostCopy:this._hostCopy.bind(this),beforeEdit:this._beforeEdit.bind(this)}};if(u.log){v.hostMethods.logError=b}v.tooltips=w.tooltips.show;if(v.tooltips){var x=this._hideTooltip.bind(this);v.hostMethods.showTooltip=this._showTooltip.bind(this);v.hostMethods.hideTooltip=x;v.hostMethods.beforeDelete=v.hostMethods.beforeInsert=x;if(w.tooltips.classPath){try{this._tooltipsHandler=new window[w.tooltips.classPath]();v.tooltipsDelay=w.tooltips.delay}catch(A){}if(!this._tooltipsHandler){b("Unable to create tooltip handler",w.tooltips.classPath)}else{this._tooltipsHandler.init(w.tooltips)}}}jQuery.extend(v,this.props);this._tracker=new ice.InlineChangeEditor(v);try{this._tracker.startTracking();this.toggleTracking(this._isTracking,false);this._updateTrackingState();jQuery(this._tracker).on("change",this._onIceChange.bind(this)).on("textChange",this._onIceTextChanged.bind(this));A.fire(p.Events.INIT,{lite:this});this._onSelectionChanged(null);this._onIceChange(null)}catch(A){b("ICE plugin init:",A)}},_onToggleShow:function(t){this.toggleShow()},_onToggleTracking:function(t){this.toggleTracking()},_onRejectAll:function(t){this.rejectAll()},_onAcceptAll:function(t){this.acceptAll()},_onAcceptOne:function(u){var t=this._tracker.currentChangeNode();if(t){this._tracker.acceptChange(t);this._cleanup();this._editor.fire(p.Events.ACCEPT,{lite:this});this._onSelectionChanged(null)}},_onRejectOne:function(u){var t=this._tracker.currentChangeNode();if(t){this._tracker.rejectChange(t);this._cleanup();this._editor.fire(p.Events.REJECT,{lite:this});this._onSelectionChanged(null)}},_onToggleTooltips:function(t){this._tracker&&this._tracker.toggleTooltips()},_cleanup:function(){var t=this._getBody();empty=jQuery(t).find(self.insertSelector+":empty,"+self.deleteSelector+":empty");empty.remove();this._onSelectionChanged(null)},_setButtonTitle:function(t,v){var u=jQuery("#"+t._.id);u.attr("title",v)},_onAfterCommand:function(u){var t=this._tracker&&this._isTracking&&u.data&&u.data.name;if("undo"==t||"redo"==t){this._tracker.reload()}},_onBeforeCommand:function(u){var t=this._tracker&&this._tracker.isTracking()&&u.data&&u.data.name;if("cut"==t){if(f(this._editor,"copy")){this._tracker.prepareToCut()}}else{if("copy"==t){if(f(this._editor,"copy")){this._tracker.prepareToCopy()}}}},_onModeChange:function(t){this._updateTrackingState();setTimeout(this._onIceChange.bind(this),0)},_onKeyPress:function(t){var u=t&&t.data&&t.data.getKeystroke();if(i(u)){t.stop()}},_onKeyDown:function(t){if(!this._tracker||!this._tracker.isTracking()){return}var u=t.data.keyCode;if(i(u)){if(this._tracker.tryToCut()){t.stop()}}},_onBeforeGetData:function(t){this._hideTooltip()},_onAfterSetData:function(t){if(this._tracker){this._tracker.reload()}},_onReadOnly:function(t){this._updateTrackingState()},_updateTrackingState:function(){if(this._tracker){var t=this._isTracking&&this._editor.mode=="wysiwyg"&&!this._editor.readOnly;this._tracker.toggleChangeTracking(t);for(var u=this._removeBindings.length-1;u>=0;--u){this._removeBindings[u].removeListener()}this._removeBindings=[];if(t){this._removeBindings.push(this._editor.on("selectionChange",this._onSelectionChanged.bind(this)))}}},_onPaste:function(B){if(!this._tracker||!this._isTracking||!B){return true}var v=B.data||{},y=false,w=null,u=(B.name=="insertElement")&&v.$;if(!v){return}if("string"==typeof v){v={dataValue:v,type:"text"}}if(u){y=u.getAttribute("data-track-changes-ignore")}else{if(v.dataValue&&"html"==(v.type||v.mode)){try{u=jQuery(v.dataValue);y=u&&u.attr("data-track-changes-ignore")}catch(x){}}}if(y){return true}if("string"==typeof v.dataValue){try{var A=this._editor.document.$,t=A.createElement("div");t.innerHTML=String(v.dataValue);t=this._tracker.getCleanDOM(t);if(!t.innerHTML){return true}w=jQuery.makeArray(t.childNodes)}catch(x){b("ice plugin paste:",x)}}else{if(u){w=u}else{return true}}if(w){var z=this._editor.focusManager.hasFocus;this._beforeInsert();this._tracker.insert({nodes:w});this._afterInsert();if(z){this._editor.editable().focus()}}B.stop();this._onIceTextChanged();return true},_setCommandsState:function(t,w){if(typeof(t)=="string"){t=t.split(",")}for(var u=t.length-1;u>=0;--u){var v=this._editor.getCommand(t[u]);if(v){v.setState(w)}}},_onSelectionChanged:function(u){var t=this._isTracking&&this._tracker&&this._tracker.isInsideChange();var v=t&&this._canAcceptReject?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;this._setCommandsState([p.Commands.ACCEPT_ONE,p.Commands.REJECT_ONE],v)},_onIceChange:function(v){var t=this._isTracking&&this._tracker&&this._tracker.hasChanges();var u=t&&this._canAcceptReject?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;this._setCommandsState([p.Commands.ACCEPT_ALL,p.Commands.REJECT_ALL],u);this._onSelectionChanged();if(v){this._triggerChange()}},_onIceTextChanged:function(t){this._triggerChange()},_triggerChange:function(){if(!this._changeTimeout){this._changeTimeout=setTimeout(this._notifyChange,1)}},_notifyChange:function(){this._changeTimeout=null;this._editor.fire(p.Events.CHANGE,{lite:this})},_notifyTextChange:function(){this._changeTimeout=null;this._editor.fire("change",{lite:this})},_commandNameToUIName:function(t){return t.replace(".","_")},_setPluginFeatures:function(x,w){if(!x||!x.filter||!x.filter.addFeature){return}try{function u(z){var B=[w.deleteClass,w.insertClass];for(var A=0;A<10;++A){B.push(w.stylePrefix+"-"+A)}return"("+B.join(",")+")"}function t(z){var A=["title"];for(var B in w.attributes){if(w.attributes.hasOwnProperty(B)){var C=w.attributes[B];if((typeof C=="string")&&C.indexOf("data-")==0){A.push(C)}}}return"["+A.join(",")+"]"}var v=[];if(w.insertTag){v.push(u(w.insertTag));v.push(t(w.insertTag));x.filter.addFeature({name:"lite1",allowedContent:w.insertTag+v.join("")})}if(w.deleteTag&&w.deleteTag!==w.insertTag){v.push(u(w.deleteTag));v.push(t(w.deleteTag));x.filter.addFeature({name:"lite2",allowedContent:w.deleteTag+v.join("")})}}catch(y){b(y)}},_setHostRange:function(t){var u=this._editor&&this._editor.getSelection();if(u){u.selectRanges([t])}},_beforeEdit:function(){CKEDITOR.iscutting=true;var u=this._editor,t=function(){u.fire("saveSnapshot")};t();setTimeout(function(){CKEDITOR.iscutting=false},100)},_hostCopy:function(){try{if(CKEDITOR.env.ie){l(this._editor,"copy")}else{this._editor.document.$.execCommand("copy",false,null)}}catch(t){b(t)}},_getHostRange:function(){var v=this._editor&&this._editor.getSelection(),t=v&&v.getRanges(),u=t&&t[0];return u||null},_getHostRangeData:function(t){t=t||this._getHostRange();if(!t){return null}return{startContainer:t.startContainer&&t.startContainer.$,endContainer:t.endContainer&&t.endContainer.$,startOffset:t.startOffset,endOffset:t.endOffset}},_showTooltip:function(u,w){var t=this._config.tooltips;if(t.show){var v=this._makeTooltipTitle(w);if(this._tooltipsHandler){this._tooltipsHandler.hideAll();this._tooltipsHandler.showTooltip(u,v,this._editor.container.$)}else{u.setAttribute("title",v)}}},_hideTooltip:function(u){if(this._tooltipsHandler){if(u){this._tooltipsHandler.hideTooltip(u)}else{this._tooltipsHandler.hideAll()}}else{if(this._tracker){if(u){u.removeAttribute("title")}else{var t=this._tracker.getIceNodes();if(t){t.removeAttr("title")}}}}},_beforeInsert:function(){this._editor.fire("saveSnapshot")},_afterInsert:function(){var t=this._editor;t.getSelection().scrollIntoView()},_makeTooltipTitle:function(w){var v=this._config.tooltipTemplate||n,u=new Date(w.time),t=new Date(w.lastTime);v=v.replace(/%a/g,"insert"==w.type?"added":"deleted");v=v.replace(/%t/g,a(u));v=v.replace(/%u/g,w.userName);v=v.replace(/%dd/g,s(u.getDate(),2));v=v.replace(/%d/g,u.getDate());v=v.replace(/%mm/g,s(u.getMonth()+1,2));v=v.replace(/%m/g,u.getMonth()+1);v=v.replace(/%yy/g,s(u.getYear()-100,2));v=v.replace(/%y/g,u.getFullYear());v=v.replace(/%nn/g,s(u.getMinutes(),2));v=v.replace(/%n/g,u.getMinutes());v=v.replace(/%hh/g,s(u.getHours(),2));v=v.replace(/%h/g,u.getHours());v=v.replace(/%T/g,a(t));v=v.replace(/%DD/g,s(t.getDate(),2));v=v.replace(/%D/g,t.getDate());v=v.replace(/%MM/g,s(t.getMonth()+1,2));v=v.replace(/%M/g,t.getMonth()+1);v=v.replace(/%YY/g,s(t.getYear()-100,2));v=v.replace(/%Y/g,t.getFullYear());v=v.replace(/%NN/g,s(t.getMinutes(),2));v=v.replace(/%N/g,t.getMinutes());v=v.replace(/%HH/g,s(t.getHours(),2));v=v.replace(/%H/g,t.getHours());return v}};function b(){var t=window.console;if(t&&t.error){t.error.apply(t,[].slice.call(arguments))}}function f(t,v){if(CKEDITOR.env.ie){return l(t,v)}try{return t.document.$.execCommand(v,false,null)}catch(u){return false}}function l(v,y){var w=v.document,t=w.getBody(),u=false,x=false,z=function(){u=true};t.on(y,z);x=(CKEDITOR.env.version>7?w.$:w.$.selection.createRange())["execCommand"](y,false);t.removeListener(y,z);return x||u}function d(){Function.prototype.bind=Function.prototype.bind||function(){var v=this,u=Array.prototype.slice.call(arguments),t=u.shift();return function(){return v.apply(t,u.concat(Array.prototype.slice.call(arguments)))}};Array.prototype.indexOf=Array.prototype.indexOf||function(w){if(this==null){throw new TypeError()}var x=Object(this);var u=x.length>>>0;if(u===0){return -1}var y=0;if(arguments.length>1){y=Number(arguments[1]);if(y!=y){y=0}else{if(y!=0&&y!=Infinity&&y!=-Infinity){y=(y>0||-1)*Math.floo1r(Math.abs(y))}}}if(y>=u){return -1}var v=y>=0?y:Math.max(u-Math.abs(y),0);for(;v<u;v++){if(v in x&&x[v]===w){return v}}return -1};Array.prototype.lastIndexOf=Array.prototype.indexOf||function(v){if(this==null){throw new TypeError()}var w=Object(this);var u=w.length>>>0;while(--u>=0){if(u in w&&w[u]===v){return u}}return -1}}})();
/* Copyright (C) 2014 LoopIndex - All Rights Reserved
 * You may use, distribute and modify this code under the
 * terms of the LoopIndex Comments CKEditor plugin license.
 *
 * You should have received a copy of the LoopIndex Comments CKEditor plugin license with
 * this file. If not, please write to: loopindex@gmail.com, or visit http://www.loopindex.com
 * written by (David *)Frenkiel (https://github.com/imdfl) 
 */